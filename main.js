(()=>{"use strict";var e={d:(t,o)=>{for(var n in o)e.o(o,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:o[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{Z:()=>a});let t=0;const o=(e,o,n,s)=>{const c=new Date(Date.now()),a=t++;return{title:e,description:o,dueDate:n,priority:s,dateAdded:c,getTaskID:()=>a,isComplete:!1,toggleCompletionStatus:function(){return!1===this.isComplete?this.isComplete=!0:this.isComplete=!1,this}}};let n=0;const s=(e,t)=>{const o=n++,s=[];return{getTitle:()=>e,getDescription:()=>t,getProjectID:()=>o,getTodoTasks:function(){return s},addTodoTask:function(e){s.push(e)},removeTodoTask:function(e){let t=e.getTaskID(),o=s.findIndex((e=>e.getTaskID()===t));s.splice(o,1)}}},c=function(){const e=document.querySelector(".main-content"),t=document.querySelector(".sidebar__projects");function o(){const t=e.childNodes;for(let o=t.length-1;o>0;o--)e.removeChild(t[o])}function n(t){t.forEach((t=>{const o=document.createElement("div");o.classList.add("task");const n=document.createElement("div");n.classList.add("task__checkmark"),n.innerText="☐";const s=document.createElement("div");s.classList.add("task__title",`task__title--priority${t.priority}`),s.innerText=t.title;const c=document.createElement("div");c.classList.add("task__due-date"),c.innerText=t.dueDate;const a=document.createElement("button");a.classList.add("task__delete"),a.setAttribute("data-id",t.getTaskID()),a.innerText="Delete",o.append(n,s,c,a),e.append(o)}))}function s(e,t){e.classList.toggle(t)}return{clearMainContent:o,displayTasks:n,clearProjectsList:function(e){const t=e.childNodes;for(let o=t.length-1;o>0;o--)e.removeChild(t[o])},toggleActiveStatus:s,displayProjects:function(c,i){i.forEach((i=>{const d=document.createElement("button");d.classList.add("link","projects__project"),d.innerText=i.getTitle(),d.addEventListener("click",(c=>{c.stopPropagation(),function(c,i){c.classList.add("projects__project--active"),o(),function(n){const s=document.createElement("div");s.classList.add("project-header");const c=document.createElement("h3");c.classList.add("project-header__title"),c.innerText=n.getTitle();const i=document.createElement("p");i.classList.add("project-header__description"),i.innerText=n.getDescription();const d=document.createElement("button");d.classList.add("project-header__delete"),d.innerText="Delete",d.addEventListener("click",(function(){!function(e){confirm(`Do you really want to delete ${e.getTitle()}?`)&&(a.deleteProject(e),o(),t.click(),t.click())}(n)})),s.append(c,i,d),e.append(s)}(i),n(i.getTodoTasks()),a.captureButtons(),document.querySelector(".sidebar__tasks").classList.remove("sidebar--active"),function(e){const o=t.childNodes;for(let t=o.length-1;t>0;t--)o[t].className.includes("projects__project--active")&&o[t]!=e&&s(o[t],"projects__project--active")}(c)}(d,i)})),c.appendChild(d)}))},removeTask:function(e){e.remove()}}}(),a=(()=>{const e=[];window.tasks=e;const t=[],n=o("clean","clean the whole house","tomorrow","1");window.item1=n,e.push(n);const a=o("work","work hard","yesterday","2");window.item2=a,e.push(a);const i=o("study","study all day","end of year","3");window.item3=i,e.push(i);const d=s("House Chores","daily house chores to be done Monday-Friday, twice a day, and without fail.");window.proj1=d,d.addTodoTask(n),d.addTodoTask(a),t.push(d);const r=s("Make Todo App","work on it every day");window.proj2=r,r.addTodoTask(i),t.push(r);const l=s("Third Project","do it good");t.push(l),window.projects=t,c.displayTasks(e),f();const u=document.querySelector(".sidebar__tasks"),p=document.querySelector(".sidebar__projects"),m=document.querySelector(".header__new-task-link"),k=document.querySelector(".header__new-project-link");function f(){document.querySelectorAll(".task__delete").forEach((o=>o.addEventListener("click",(function(){!function(o){confirm("You want to delete this task?")&&(function(o){const n=e.find((e=>e.getTaskID()===parseInt(o)));console.log(n),t.forEach((e=>{e.getTodoTasks().includes(n)&&e.removeTodoTask(n)}))}(o.dataset.id),T(o.dataset.id),c.removeTask(o.parentElement))}(o)}))))}function T(t){const o=e.findIndex((e=>e.getTaskID()===t));e.splice(o,1)}return u.addEventListener("click",(function(){u.className.includes("sidebar--active")||c.toggleActiveStatus(u,"sidebar--active"),p.parentElement.className.includes("sidebar--active")&&(c.clearProjectsList(p),c.toggleActiveStatus(p.parentElement,"sidebar--active")),c.clearMainContent(),c.displayTasks(e),f()})),p.addEventListener("click",(function(){if(p.parentElement.className.includes("sidebar--active"))return c.toggleActiveStatus(p.parentElement,"sidebar--active"),void c.clearProjectsList(p);c.toggleActiveStatus(p.parentElement,"sidebar--active"),c.displayProjects(p,t)})),m.addEventListener("click",(function(){})),k.addEventListener("click",(function(){})),{captureButtons:f,deleteProject:function(e){!function(e){confirm("Do you also want to delete its tasks?")&&e.getTodoTasks().forEach((e=>T(e.getTaskID())))}(e);const o=t.findIndex((t=>t.getProjectID()===e.getProjectID()));t.splice(o,1)}}})()})();