(()=>{"use strict";var e={d:(t,o)=>{for(var n in o)e.o(o,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:o[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{Z:()=>a});let t=0;const o=(e,o,n,s)=>{const c=new Date(Date.now()),a=t++;return{title:e,description:o,dueDate:n,priority:s,dateAdded:c,getTaskID:()=>a,isComplete:!1,toggleCompletionStatus:function(){return!1===this.isComplete?this.isComplete=!0:this.isComplete=!1,this}}};let n=0;const s=(e,t)=>{const o=n++,s=[];return{getTitle:()=>e,getDescription:()=>t,getProjectID:()=>o,getTodoTasks:function(){return s},addTodoTask:function(e){s.push(e)},removeTodoTask:function(e){let t=e.getTaskID(),o=s.findIndex((e=>e.getTaskID()===t));s.splice(o,1)}}},c=function(){const e=document.querySelector(".main-content"),t=document.querySelector(".sidebar__projects");function o(){const t=e.childNodes;for(let o=t.length-1;o>0;o--)e.removeChild(t[o])}function n(t){t.forEach((t=>{const o=document.createElement("div");o.classList.add("task");const n=document.createElement("div");n.classList.add("task__checkmark"),n.innerText="☐";const s=document.createElement("div");s.classList.add("task__title",`task__title--priority${t.priority}`),s.innerText=t.title;const c=document.createElement("div");c.classList.add("task__due-date"),c.innerText=t.dueDate;const a=document.createElement("button");a.classList.add("task__delete"),a.setAttribute("data-id",t.getTaskID()),a.innerText="Delete",o.append(n,s,c,a),e.append(o)}))}function s(){const e=t.childNodes;for(let o=e.length-1;o>0;o--)t.removeChild(e[o])}function c(e,t){e.classList.toggle(t)}function i(){document.querySelector(".sidebar__tasks").classList.remove("sidebar--active")}return{clearMainContent:o,displayTasks:n,clearProjectsList:s,toggleActiveStatus:c,displayProjects:function(s,d){d.forEach((d=>{const r=document.createElement("button");r.classList.add("link","projects__project"),r.innerText=d.getTitle(),r.addEventListener("click",(s=>{s.stopPropagation(),function(s,d){s.classList.add("projects__project--active"),o(),function(n){const s=document.createElement("div");s.classList.add("project-header");const c=document.createElement("h3");c.classList.add("project-header__title"),c.innerText=n.getTitle();const i=document.createElement("p");i.classList.add("project-header__description"),i.innerText=n.getDescription();const d=document.createElement("button");d.classList.add("project-header__delete"),d.innerText="Delete",d.addEventListener("click",(function(){!function(e){confirm(`Do you really want to delete ${e.getTitle()}?`)&&(a.deleteProject(e),o(),t.click(),t.click())}(n)})),s.append(c,i,d),e.append(s)}(d),n(d.getTodoTasks()),a.captureButtons(),i(),function(e){const o=t.childNodes;for(let t=o.length-1;t>0;t--)o[t].className.includes("projects__project--active")&&o[t]!=e&&c(o[t],"projects__project--active")}(s)}(r,d)})),s.appendChild(r)}))},removeTask:function(e){e.remove()},newTaskForm:function(t){i(),s(),document.querySelector(".sidebar__projects-container").classList.remove("sidebar--active");const o=document.createElement("div");o.classList.add("task-form__container");const n=document.createElement("form");n.classList.add("task-form");const c=document.createElement("div");c.classList.add("task-form__left-side");const a=document.createElement("input");a.classList.add("task-form__title"),a.setAttribute("type","text"),a.name="title",a.placeholder="Title";const d=document.createElement("textarea");d.classList.add("task-form__description"),d.name="description",d.placeholder="Description";const r=document.createElement("select");r.classList.add("task-form__projects"),r.name="project";const l=document.createElement("option");l.setAttribute("value",""),l.innerText="Add to Project",l.disabled=!0,l.selected=!0,r.append(l);const u=document.createElement("option");u.setAttribute("value",""),u.innerText="No Project",r.append(u),t.forEach((e=>{const t=document.createElement("option");t.setAttribute("value",e.getTitle()),t.innerText=e.getTitle(),r.append(t)})),c.append(a,d,r);const m=document.createElement("div");m.classList.add("task-form__right-side");let p=0;const f=document.createElement("select");f.classList.add("task-form__priority"),f.name="priority";const k=document.createElement("option");k.setAttribute("value",""),k.innerText="Choose Priority",k.disabled=!0,k.selected=!0,f.append(k),["low","medium","high"].forEach((e=>{const t=document.createElement("option");t.setAttribute("value",++p),t.innerText=e,f.append(t)}));const _=document.createElement("div");_.classList.add("task-form__form-group");const T=document.createElement("label");T.classList.add("task-form__due-date-label"),T.setAttribute("for","due-date"),T.innerText="Due Date:";const g=document.createElement("input");g.classList.add("task-form__due-date"),g.setAttribute("type","date"),g.name="due-date",_.append(T,g);const h=document.createElement("input");h.classList.add("task-form__submit"),h.setAttribute("type","submit"),m.append(f,_,h),n.append(c,m),o.append(n),e.append(o)}}}(),a=(()=>{const e=[];window.tasks=e;const t=[],n=o("clean","clean the whole house","tomorrow","1");window.item1=n,e.push(n);const a=o("work","work hard","yesterday","2");window.item2=a,e.push(a);const i=o("study","study all day","end of year","3");window.item3=i,e.push(i);const d=s("House Chores","daily house chores to be done Monday-Friday, twice a day, and without fail.");window.proj1=d,d.addTodoTask(n),d.addTodoTask(a),t.push(d);const r=s("Make Todo App","work on it every day");window.proj2=r,r.addTodoTask(i),t.push(r);const l=s("Third Project","do it good");t.push(l),window.projects=t,c.displayTasks(e),_();const u=document.querySelector(".sidebar__tasks"),m=document.querySelector(".sidebar__projects"),p=document.querySelector(".header__new-task-link"),f=document.querySelector(".header__new-project-link");function k(){const t=document.querySelector(".task-form"),n=new FormData(t),s=n.get("title"),c=n.get("description"),a=n.get("project"),i=n.get("priority"),d=n.get("due-date");console.log(s,typeof s,c,typeof c,a,typeof a,i,typeof i,d,typeof d);const r=o(s,c,d,i);e.push(r)}function _(){document.querySelectorAll(".task__delete").forEach((o=>o.addEventListener("click",(function(){!function(o){confirm("You want to delete this task?")&&(function(o){const n=e.find((e=>e.getTaskID()===parseInt(o)));console.log(n),t.forEach((e=>{e.getTodoTasks().includes(n)&&e.removeTodoTask(n)}))}(o.dataset.id),T(o.dataset.id),c.removeTask(o.parentElement))}(o)}))))}function T(t){console.log(t),console.log(e);const o=e.findIndex((e=>e.getTaskID()===parseInt(t)));console.log(o),e.splice(o,1)}return u.addEventListener("click",(function(){u.className.includes("sidebar--active")||c.toggleActiveStatus(u,"sidebar--active"),m.parentElement.className.includes("sidebar--active")&&(c.clearProjectsList(),c.toggleActiveStatus(m.parentElement,"sidebar--active")),c.clearMainContent(),c.displayTasks(e),_()})),m.addEventListener("click",(function(){if(m.parentElement.className.includes("sidebar--active"))return c.toggleActiveStatus(m.parentElement,"sidebar--active"),void c.clearProjectsList();c.toggleActiveStatus(m.parentElement,"sidebar--active"),c.displayProjects(m,t)})),p.addEventListener("click",(function(){c.clearMainContent(),c.newTaskForm(t),document.querySelector(".task-form__submit").addEventListener("click",(()=>{k(),c.clearMainContent(),c.displayTasks(e),_()}))})),f.addEventListener("click",(function(){})),{captureButtons:_,deleteProject:function(e){!function(e){confirm("Do you also want to delete its tasks?")&&e.getTodoTasks().forEach((e=>T(e.getTaskID())))}(e);const o=t.findIndex((t=>t.getProjectID()===e.getProjectID()));t.splice(o,1)},saveTask:k}})()})();